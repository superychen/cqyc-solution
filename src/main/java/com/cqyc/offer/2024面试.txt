
1、自我介绍
    面试官下午好，我叫杨晨，20年毕业于重庆工程学院，目前从事了4年的java开发工作经验，之前任职于史泰博中国以及永辉超市担任java开发工程师。
任职到现在，在永辉和史泰博主要负责得是B端供应链这一块，重点参与的项目有史泰博开放平台、VP中台，永辉采购中台这几个项目。
在史泰博任职期间，主要参与的有供应链数字化改造，协同平台功能建设，以及VP商品上下架构重建等。目前对史泰博B2B相关的一些业务，以及Java常用的技术、框架
都有一定的了解。平时闲暇的时候也会对目前流行的技术以及知识进行了解。

统一租户平台（账号管理，入驻管理，租户创建，租户权限管理）
统一开放平台（统一请求入口，请求鉴权管理，服务报文加解密，防爬虫，异常警告，限流管理，请求日志收集，请求统计）
统一数据推送平台（推送任务管理，任务自动重试，数据分页推送，推送文件生成，外部文件生成）
统一消息平台（消息管理，订阅管理，多集群订阅，消息栅栏，消息查询，异常重试）
统一大客户适配平台（动态脚本解析，硬编码路由，三方token维护，三方加解密，三方数据缓存，统一异常处理）
统一链路监控（请求监控，APM监控，资源监控，请求统计，业务告警，异常统计，日志管理）

消息平台快消息重试组件：
    探查调度器(查询重试数据，标记未执行状态，缓存msgID和延迟时间，并把当前时间当做score，放到redis的zset中)
    执行调度器：从redis中根据score获取一定数量的重试消息，这时开始进行推送，根据推送结果刷新缓存中的推送状态，推送次数。
    清理调度器：根据结果缓存在刷新缓存中的数据（因为不在同一个事务中，为了保证数据最终一致性，单独开启一个调度器）

2、项目介绍
    在整个业务链中，开放平台是作为一个主要的对接门户做的，它其实就是将整个史泰博供应中台具备共享能力进行互联网方式的开放，供第三方调用。
在开放平台能力全景中，主要分为统一租户平台、统一开放平台、统一数据推送平台、统一消息平台、以及大客户适配平台。
    开放平台的整体对接流程是从企业入驻，包括资质认证和入驻审核。审核通过后进行API接入，这其中包括应用建立，API的录入、审核，加解密设置，
流控设置，以及消息订阅。API接入完成后UAT试运行成功，则进行发布上线。最后就是各链路的指标监控，包括到异常情况监控，服务链路监控，API上下线通知，
流量统计等。
    我主要负责的就是统一数据推送平台、统一消息平台和大客户适配平台。
    数据推送平台主要内部能力是由大数据平台提供，将业务数据清理后，下发到平台业务中转表，然后通过丰富的推送方式将大数据那边抽取的数据推送给各个企业，
其中包括推送邮政、国网以及政府企业各类的烟草、选品数据，因为各个企业推送方式和接收方式不同，所以通过策略模式将数据转换为http、xml、webService、
ftp等数据格式进行推送。
    还有统一消息平台，目的就是将内部消息透出去，由管理员从管理平台中添加内部topic主题，消息平台实现了多集群监听，比如监听sass、福利、adv商城等集群，
然后维护一个topic订阅关系表，进行推送寻址，如果推送失败会进入重试表中，然后由快消息重试组件进行重试推送（分为探查调度器，执行调度器，清理调度器）。
进行策略重试，分为按时间推送，还是按次数推送，如果一直失败后则进入死信队列。
    最后大客户适配平台其实是将外部接口能力接进来,内部业务调用第三方接口统一经过VOP平台，由VOP平台通过各种适配器将第三方的出参入参，以及请求头等信息封装
成永辉内部能识别的参数，然后对第三方进行远程调用。整个的流程是第三方的配置请求在开放平台中台配置完成之后，更新到DB，然后MQ到VOP平台，然后VOP会更新到
对应的服务，应用，api配置到redis缓存中。内部业务域接口需要调用第三方接口时，通过VOP平台，经过低代码组件中的各种适配器（公共参数适配器，第三方认证适配器，
脚本适配器，硬编码处理器）处理之后,进行远程调用，然后对于返回的结果再由脚本适配器，定制的适配器做一些处理返回到内部业务域中。

###VP商品中台
    我这里负责VP商品，商管在引入一个新商品时，
引入流程也是数据生成审批流之后，对接到流程引擎进行流程处理，流程扭转结束后，经过各个部门审批后，数据上传至sap生成正式商品编码，最后下发至商品中间表，最后落地商品主数据中，
包括商品基础信息，大区商品，货源信息，最终由canal读取mysql binlog中的数据，读取之后会同步到es中，这里es其实是做了一个宽表处理的，
其实就是当成一个重点做数据搜索的数据库，然后再把一些热点供应商的商品key存储在redis中，至此一个商品信息就正式录入到永辉。
在后续的订单操作中，我以一台办公笔记本为例，它在我们网站中销售给对应的客户，当库存卖完了之后，需要补充对应货物的时候，这史泰博的采购经理会进行采购订单的需求，
其中就包括供应商直送，或者物流配送，以及仓储调拨等方式进行。此时就会在VP中台生成一个采购直送单，一系列处理之后，
会通知到供应商进行订单发送，或者仓储中心进行补货，此时如果不是直送订单，供应商会发货到wms，此时wms进行验货入库，
此时会调用到库存中心，进入库存更新，最后生成商品凭证，这个商品凭证回传到VP中台，此时一个订单正式生成完成，
这个时候就会到OMS在发一个订货通知单，供应商可以在OMS查询对应的订货通知单。商品最后被客户前后完成后，即可进行关单处理。
去年的史泰博采购订单营业额大约是在20个亿左右。